<?php

class ListModel {

	protected $persistent;
	protected $result;
	protected $model;

	function ListModel() {
		$this->persistent = new Persistent();
	}
    
    function getListByKey($key) {
    	$this->persistent->findByKeys($key, $this->model);
    }
    
    function getRow() {
		return mysql_fetch_object($this->result);
	}
	
	function getNumRows() {
		return mysql_num_rows($this->result);
	}
	
	function getAsJson() {
		$resultado = array();
		while ($obj = $this->getRow()) {
			$resultado[] = $obj;
		}
		return json_encode($resultado);
	}
	
	function getPaginacao($pagina, $nroRegistros) {
		if (($pagina > 0) and ($nroRegistros > 0)) {
			return " limit " . (($pagina - 1) * $nroRegistros) . ", " . $nroRegistros;
		} else {
			return "";
		}
	}
	
}
?>